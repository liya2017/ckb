# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. 
on:
  # # Triggers the workflow on push or pull request events but only for the main branch
  # pull_request:
  #   branches: [ main ]
  issue_comment:
    types: [created,edited]
jobs:
  deploy-check:
    runs-on: ubuntu-latest
    steps:
      - name: acknowledge deployment request to commenter
        id: check
        uses: khan/pull-request-comment-trigger@master
        with:
          trigger: "/deploy"
          reaction: rocket
        env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
    outputs:
      triggered: ${{ steps.check.outputs.triggered }}

  deploy:
    runs-on: ubuntu-latest
    needs: deploy-check
    if: needs.deploy-check.outputs.triggered == 'true'
    steps:
      - name: get pull request ref
        run: echo "ðŸ”Ž The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
        env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
